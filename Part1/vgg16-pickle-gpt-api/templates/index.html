<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>D√©ploiement ML Multi-Mod√®les</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    
    <style>
        /* ---------- Background Anim√© ---------- */
        body {
            padding-top: 50px;
            min-height: 100vh;
            background: linear-gradient(270deg, #ff9a9e, #fad0c4, #a18cd1, #fbc2eb);
            background-size: 800% 800%;
            animation: gradientBG 15s ease infinite;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        @keyframes gradientBG {
            0% {background-position:0% 50%;}
            50% {background-position:100% 50%;}
            100% {background-position:0% 50%;}
        }

        .container { max-width: 950px; }

        /* ---------- Cartes ---------- */
        .card {
            backdrop-filter: blur(15px);
            background-color: rgba(255, 255, 255, 0.75);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-7px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        h1 {
            font-weight: 700;
            color: #fff;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.4);
        }

        label {
            font-weight: 500;
        }

        input, textarea {
            transition: 0.2s;
        }

        input:focus, textarea:focus {
            box-shadow: 0 0 10px rgba(13,110,253,0.5);
            border-color: #0d6efd;
        }

        .btn-primary, .btn-info, .btn-warning, .btn-secondary {
            transition: 0.3s;
        }

        .btn-primary:hover { background-color: #0056b3; }
        .btn-info:hover { background-color: #0b5ed7; }
        .btn-warning:hover { background-color: #e0a800; }
        .btn-secondary:hover { background-color: #6c757d; color:#fff; }

        .text-gen-output {
            white-space: pre-wrap;
            text-align: left;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: rgba(248,249,250,0.8);
            font-family: monospace;
        }

        hr {
            border-top: 2px solid rgba(0,0,0,0.1);
        }

        .alert {
            border-radius: 10px;
        }

        .footer-btn {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 50px;
        }
    </style>
</head>

<body>
<div class="container">
    <h1 class="text-center mb-5">D√©ploiement de Mod√®les ML Multiples</h1>

    <!-- ---------- Image Classification ---------- -->
    <div class="card p-4 mb-5">
        <h3 class="text-center mb-4 text-primary">Classification d'Image (VGG16)</h3>

        <form class="p-3 text-center" action='/predict' method="post" enctype="multipart/form-data">
            <label for="imagefile" class="form-label">S√©lectionner un fichier image :</label>
            <input class="form-control mb-3" type="file" name="imagefile" id="imagefile" required>
            <input class="btn btn-primary" type="submit" value="Pr√©dire l'Image">
        </form>

        {% if prediction %}
            <div class="alert alert-success mt-4 text-center">
                ‚úÖ R√©sultat : <strong>{{ prediction }}</strong>
            </div>
        {% endif %}
    </div>

    <!-- ---------- R√©gression ---------- -->
    <div class="card p-4 mb-5">
        <h3 class="text-center mb-4 text-info">Pr√©diction de R√©gression (Mod√®le Pickle)</h3>

        <form class="p-3" method="POST" action="/regpredict">
            <div class="mb-3">
                <label class="form-label">Exp√©rience :</label>
                <input type="text" name="experience" class="form-control" placeholder="ex: five" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Test Score :</label>
                <input type="number" step="any" name="test_score" class="form-control" placeholder="ex: 8" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Interview Score :</label>
                <input type="number" step="any" name="interview_score" class="form-control" placeholder="ex: 7" required>
            </div>

            <div class="text-center">
                <input class="btn btn-info" type="submit" value="Pr√©dire le Salaire">
            </div>
        </form>

        {% if regression_prediction %}
            <div class="alert alert-secondary mt-4 text-center">
                üìä R√©sultat : <strong>{{ regression_prediction }}</strong>
            </div>
        {% endif %}
    </div>

    <!-- ---------- Text Generation ---------- -->
    <div class="card p-4 mb-5">
        <h3 class="text-center mb-4 text-warning">G√©n√©ration de Texte (GPT-2 / Hugging Face)</h3>

        <form class="p-3" method="POST" action="/textgen">
            <div class="mb-3">
                <label for="prompt_text" class="form-label">Texte initial (Prompt) :</label>
                <textarea name="prompt_text" id="prompt_text" rows="3" class="form-control" required>{{ textgen_prompt if textgen_prompt }}</textarea>
            </div>

            <div class="text-center">
                <input class="btn btn-warning" type="submit" value="G√©n√©rer du Texte">
            </div>
        </form>

        {% if textgen_result %}
            <h5 class="mt-4 text-center">üìù Texte G√©n√©r√© :</h5>
            <pre class="text-gen-output">{{ textgen_result }}</pre>
        {% endif %}

        {% if textgen_error %}
            <div class="alert alert-danger text-center mt-3">
                ‚ùå Erreur : {{ textgen_error }}
            </div>
        {% endif %}
    </div>

    {% if error %}
        <div class="alert alert-danger text-center mt-5">
            ‚ùå Erreur G√©n√©rale : {{ error }}
        </div>
    {% endif %}

    <!-- ---------- Footer / Navigation vers Home ---------- -->
    <div class="footer-btn">
        <a href="{{ url_for('home_page') }}" class="btn btn-secondary btn-lg">Voir la page Home</a>
    </div>

</div>
</body>
</html>
